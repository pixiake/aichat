(()=>{var t={n:o=>{var a=o&&o.__esModule?()=>o.default:()=>o;return t.d(a,{a}),a},d:(o,a)=>{for(var e in a)t.o(a,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:a[e]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o)};(()=>{"use strict";const o=flarum.core.compat["common/app"];t.n(o)().initializers.add("pixiake/aichat",(function(){console.log("Hello, common!")}));const a=flarum.core.compat["forum/app"];var e=t.n(a);const r=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/CommentPost"];var i=t.n(n);const s=flarum.core.compat["common/components/Button"];var c=t.n(s);e().initializers.add("pixiake/aichat",(function(){(0,r.extend)(i().prototype,"actionItems",(function(t){var o=this.attrs.post,a=o.discussion(),e=o.attribute("isMarkedWrong"),r=app.forum.attribute("needHelpTags"),n=app.forum.attribute("botUserId");o.user()&&o.user().id()!==n||t.add("needHelp",c().component({className:"Button Button--link",icon:e?"fas fa-running":"fas fa-hands-helping",onclick:function(){e||(o.pushAttributes({isMarkedWrong:!0}),app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/ai-chat/v1alpha1/mark-post",body:{postId:o.id(),isWrong:!0}}).catch((function(t){o.pushAttributes({isMarkedWrong:e})})),app.request({method:"POST",url:app.forum.attribute("apiUrl")+"/ai-chat/v1alpha1/mark-discussion",body:{discussionId:a.id(),mark:{needToLearn:{ids:r,action:"add"}}}}).catch((function(t){app.alerts.show({type:"error"},t.message)})))}},e?"热心大佬正在赶来...":"呼叫热心大佬支援",-9))}))}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map